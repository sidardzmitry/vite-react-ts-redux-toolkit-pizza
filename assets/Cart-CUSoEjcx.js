import{c as $,u as y,j as e,R as n,a as o,r as v,e as f,f as w,H as C,B as I,b as N,A as k}from"./index-CDZWrgAU.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=$("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M="_cart__head_12fiw_1",R="_cart__wrapper_12fiw_4",A="_cart__error_12fiw_8",B="_order_12fiw_15",D="_order__item_12fiw_19",L="_item__currency_12fiw_46",S="_checkout_12fiw_50",t={cart__head:M,cart__wrapper:R,cart__error:A,order:B,order__item:D,item__currency:L,checkout:S},F="_item_13zvs_1",H="_item__img_13zvs_19",X="_item__desc_13zvs_27",T="_item__title_13zvs_34",U="_item__price_13zvs_39",V="_item__actions_13zvs_45",Y="_item__btns_13zvs_52",q="_item__btn_13zvs_52",G="_item__count_13zvs_67",J="_item__remove_13zvs_74",K="_plus_13zvs_84",c={item:F,item__img:H,item__desc:X,item__title:T,item__price:U,item__actions:V,item__btns:Y,item__btn:q,item__count:G,item__remove:J,plus:K},O=({id:r,name:d,image:a,price:m,count:l})=>{const _=y(),h=()=>{_(o.add(r))},u=()=>{_(o.remove(r))},x=()=>{_(o.delete(r))};return e.jsxs("div",{className:`${c.item}`,children:[e.jsx("div",{className:`${c.item__img}`,style:{backgroundImage:`url('${a}')`}}),e.jsxs("div",{className:`${c.item__desc}`,children:[e.jsx("h2",{className:`${c.item__title}`,children:d}),e.jsxs("div",{className:`${c.item__price}`,children:[m,e.jsx(n,{size:16,strokeWidth:2,className:`${c.item__currency}`})]})]}),e.jsxs("div",{className:`${c.item__actions}`,children:[e.jsxs("div",{className:`${c.item__btns}`,children:[e.jsx("button",{className:`${c.item__btn}`,onClick:u,children:e.jsx(E,{size:16,strokeWidth:2,color:"#8e00ff"})}),e.jsx("div",{className:`${c.item__count}`,children:l}),e.jsx("button",{className:`${c.item__btn} ${c.plus}`,onClick:h,children:e.jsx(P,{size:16,strokeWidth:2,color:"#ffffff"})})]}),e.jsx("button",{className:`${c.item__remove}`,onClick:x,children:e.jsx(W,{size:16,strokeWidth:2,color:"#8e00ff"})})]})]})},b=165,Z=()=>{const[r,d]=v.useState(!0),[a,m]=v.useState([]),l=f(s=>s.user.jwt),_=f(s=>s.cart.items),h=y(),u=w(),x=async s=>{const{data:i}=await N.get(`${k}/products/${s}`);return i},z=async()=>{const s=await Promise.all(_.map(i=>x(i.id)));m(s)},g=async()=>{await N.post(`${k}/order`,{products:_},{headers:{Authorization:`Bearer ${l}`}}),h(o.clean()),u("/success")},j=_.map(s=>{const i=a.find(p=>p.id===s.id);return i?s.count*i.price:0}).reduce((s,i)=>s+=i,0);return v.useEffect(()=>{z(),_.length&&d(!1)},[_]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${t.cart}`,children:[e.jsx(C,{className:`${t.cart__head}`,children:"Cart"}),e.jsx("div",{className:`${t.cart__wrapper}`,children:_.length>=1?_.map(s=>{const i=a.find(p=>p.id===s.id);if(i)return e.jsx(O,{count:s.count,...i},i.id)}):e.jsx("h3",{className:`${t.cart__error}`,children:"Cart is empty"})}),e.jsxs("div",{className:`${t.order}`,children:[e.jsxs("div",{className:`${t.order__item}`,children:[e.jsx("h3",{children:"Price"}),e.jsxs("div",{children:[j,e.jsx(n,{size:16,strokeWidth:2,className:`${t.item__currency}`})]})]}),e.jsxs("div",{className:`${t.order__item}`,children:[e.jsx("h3",{children:"Delivery"}),e.jsxs("div",{children:[b,e.jsx(n,{size:16,strokeWidth:2,className:`${t.item__currency}`})]})]}),e.jsxs("div",{className:`${t.order__item}`,children:[e.jsxs("h3",{children:["Total ",e.jsx("span",{children:_.length})]}),e.jsxs("div",{children:[j?j+b:0,e.jsx(n,{size:16,strokeWidth:2,className:`${t.item__currency}`})]})]})]}),e.jsx("div",{className:`${t.checkout}`,children:e.jsx(I,{appearance:"big",className:`${t["checkout-btn"]}`,onClick:g,disabled:r,children:"Checkout"})})]})})};export{Z as Cart,Z as default};
